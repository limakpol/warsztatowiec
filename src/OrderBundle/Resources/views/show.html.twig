{% extends ':base:application.html.twig' %}
{% block stylesheets %}
    {{ parent() }}
    {% stylesheets
        'assets/css/application/order/show.css'
        'assets/css/application/order/status.css'
    filter='cssrewrite' %}
    <link rel="stylesheet" href="{{ asset_url }}" />
    {% endstylesheets %}
{% endblock %}
{% block main %}
    <div class="show-box">
        <h1>
            <label>Dane podstawowe</label>
        </h1>
        <section>
            <table class="info-table">
                <tr>
                    <td>Statusy</td>
                    <td class="statuses" data-order-id="{{ orderHeaderId }}">
                        {% for status in orderHeader.statuses %}
                            <button style="border-color: {{ status.hexColor }}">{{ status.name }}</button>
                        {% endfor %}
                    </td>
                </tr>
                <tr>
                    <td>Stanowisko naprawcze</td>
                    <td>
                        <div class="main-form">
                            <select id="select-workstation">
                                {% for workstation in workstations %}
                                    <option value="{{ workstation.id }}"
                                    {% if workstation.id == orderHeader.workstationId %}
                                    selected="selected"
                                    {% endif %}
                                    >{{ workstation.name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>Priorytet</td>
                    <td>
                        <input type="checkbox" id="checkbox-priority"
                        {% if orderHeader.priority == true %}
                        checked="checked"
                        {% endif %}
                        >
                    </td>
                </tr>
                <tr>
                    <td>Uwagi</td>
                    <td>{{ orderHeader.remarks }}</td>
                </tr>
                <tr>
                    <td>Zakończone</td>
                    <td>
                        {% if orderHeader.completedAt is null %}
                        NIE
                        {% else %}
                            {{ orderHeader.completedAt|date }}
                        {% endif %}
                    </td>
                </tr>
                <tr>
                    <td>Zapłacone</td>
                    <td>
                        {% if orderHeader.paidAt is null %}
                            NIE
                        {% else %}
                            {{ orderHeader.paidAt|date }}
                        {% endif %}
                    </td>
                </tr>
                <tr>
                    <td>Kwota wpłacona przez klienta</td>
                    <td>
                        <div class="main-form form-set">
                            <input type="text" maxlength="10" size="6" id="input-paid">zł
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>Wprowadzono</td>
                    <td>{{ orderHeader.createdAt|date }} przez <a href="{{ path('workflow_workman_show', {userId: orderHeader.createdBy.id}) }}">
                            {{ orderHeader.createdBy.forename }} {{ orderHeader.createdBy.surname }}
                        </a>
                    </td>
                </tr>
                <tr>
                    <td>Zaktualizowano</td>
                    <td>
                        {{ orderHeader.updatedAt|date }} przez <a href="{{ path('workflow_workman_show', {userId: orderHeader.updatedBy.id}) }}">
                            {{ orderHeader.updatedBy.forename }} {{ orderHeader.updatedBy.surname }}
                        </a>
                    </td>
                </tr>
                <tr class="footer">
                    <td colspan="2">
                        <button class="btn-remove" id="order-remove">usuń<i class="fa fa-trash-o" aria-hidden="true"></i></button>
                    </td>
                </tr>
            </table>
        </section>
    </div>
    <div class="show-box">
        <h1>
            <label>Klient</label>
        </h1>
        <section>
            <table class="info-table">
                <tr>
                    <td>Imię</td>
                    <td>{{ orderHeader.customer.forename }}</td>
                </tr>
                <tr>
                    <td>Nazwisko</td>
                    <td>{{ orderHeader.customer.surname }}</td>
                </tr>
                <tr>
                    <td>Nazwa firmy</td>
                    <td>
                        {{ orderHeader.customer.companyName }}
                    </td>
                </tr>
                <tr>
                    <td>Telefon</td>
                    <td>
                        {% if orderHeader.customer.mobilePhone1 is null%}
                            {{ orderHeader.customer.mobilePhone2|phone }}
                        {% else %}
                            {{ orderHeader.customer.mobilePhone1|phone }}
                        {% endif %}
                    </td>
                </tr>
                <tr>
                    <td>E-mail</td>
                    <td>{{ orderHeader.customer.email }}</td>
                </tr>
                <tr class="footer">
                    <td colspan="2">
                        <a class="btn-info" href="{{ path('customer_show', {customerId: orderHeader.customerId}) }}">szczegóły
                            <i class="fa fa-info-circle" aria-hidden="true"></i>
                        </a>
                        <button class="btn-edit">zmień
                            <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                        </button>
                    </td>
                </tr>
            </table>
        </section>
    </div>
    <div class="show-box">
        <h1>
            <label>Pojazd</label>
        </h1>
        <section>
            <table class="info-table">
                <tr>
                    <td>Marka</td>
                    <td>
                        {{ orderHeader.vehicle.carModel.brand.name }}
                    </td>
                </tr>
                <tr>
                    <td>Model</td>
                    <td>{{ orderHeader.vehicle.carModel.name }}</td>
                </tr>
                <tr>
                    <td>Wersja</td>
                    <td>{{ orderHeader.vehicle.version }}</td>
                </tr>
                <tr>
                    <td>Typ silnika</td>
                    <td>{{ orderHeader.vehicle.engineType }}</td>
                </tr>
                <tr>
                    <td>Pojemność</td>
                    <td>
                        {% if orderHeader.vehicle.engineDisplacementL is not null %}
                            {{ orderHeader.vehicle.engineDisplacementL }}l
                        {% endif %}
                    </td>
                </tr>
                <tr class="footer">
                    <td colspan="2">
                        <a class="btn-info" href="{{ path('vehicle_show', {vehicleId: orderHeader.vehicleId}) }}">szczegóły
                            <i class="fa fa-info-circle" aria-hidden="true"></i>
                        </a>
                        <button class="btn-edit">zmień
                            <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                        </button>
                    </td>
                </tr>
            </table>
        </section>
    </div>
    <div class="show-box">
        <h1>
            <label>Objawy zgłaszane przez klienta</label>
        </h1>
        <section>aaa</section>
    </div>
    <div class="show-box">
        <h1>
            <label>Usterki stwierdzone przez mechaników</label>
        </h1>
        <section>aaa</section>
    </div>
    <div class="show-box">
        <h1>
            <label>Pozycje zlecenia</label>
        </h1>
        <section>aaa</section>
    </div>
{% endblock %}
{% block javascripts %}
    {{ parent() }}
    {% javascripts
        'assets/js/application/show.js'
        'assets/js/application/order/show.js'
        'assets/js/application/order/status.js'
    %}
    <script src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %}